views:
  - name: executive_dashboard
    description: "Executive-level KPIs combining all departments"
    
    cubes:
      - join_path: daily_reports
        includes:
          - report_date
          - report_type
          - count
          
      - join_path: daily_reports.companies
        includes:
          - company_name
          - department_type
          
      - join_path: daily_reports.financial_metrics
        includes:
          - bank_inflow
          - bank_outflow
          - cash_balance
          - debt_ratio
          - leaf_revenue
          - seedling_revenue
          - energy_cost
          - labor_cost
          - material_cost
          
      - join_path: daily_reports.production_metrics
        includes:
          - raw_material_volume
          - finished_product_volume
          - efficiency_cut
          - efficiency_aseptic
          - error_rate
          - direct_labor_count
          - indirect_labor_count
          
      - join_path: daily_reports.sales_metrics
        includes:
          - total_orders
          - new_customers
          - sales_target_achievement
          - customer_retention_rate
        excludes:
          - total_revenue
          
      - join_path: daily_reports.hr_metrics
        includes:
          - total_employees
          - new_hires
          - training_sessions
          
    measures:
      - name: total_daily_revenue
        sql: "{financial_metrics.leaf_revenue} + {financial_metrics.seedling_revenue} + {sales_metrics.total_revenue}"
        type: number
        description: "Combined revenue from all sources"
        
      - name: total_costs
        sql: "{financial_metrics.energy_cost} + {financial_metrics.labor_cost} + {financial_metrics.material_cost}"
        type: number
        description: "Combined operational costs"
        
      - name: total_labor
        sql: "{production_metrics.direct_labor_count} + {production_metrics.indirect_labor_count}"
        type: number
        description: "Total labor count across production"
        
      - name: operational_efficiency
        sql: "({production_metrics.efficiency_cut} + {production_metrics.efficiency_aseptic}) / 2"
        type: number
        description: "Average operational efficiency across production lines"
        
      - name: cash_flow_ratio
        sql: "{financial_metrics.bank_inflow} / NULLIF({financial_metrics.bank_outflow}, 0)"
        type: number
        description: "Cash inflow to outflow ratio"
        